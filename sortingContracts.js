const fs = require('fs');
const path = require('path');

// Function to get folder information from a directory
function getFolderInformation(directoryPath) {
  return fs.readdirSync(directoryPath).map(folderName => {
    const folderPath = path.join(directoryPath, folderName);
    const files = fs.readdirSync(folderPath);
    return { name: folderName, files: files };
  });
}

// Directory path (replace with your actual directory path)
const directoryPath = 'Contracts_NonVulnerable/contracts_divided';

// Get folder information from the directory
const folders = getFolderInformation(directoryPath);

// Sort folders based on the number of files
folders.sort((a, b) => a.files.length - b.files.length);

// Create a string representation of the sorted folders
const sortedFoldersString = "Sorted Folders based on the number of files:\n" +
  folders.map(folder => `${folder.name}: ${folder.files.length} files`).join('\n');

// Write the sorted folder information to a new file
const outputPath = 'Contracts_NonVulnerable/fileCount.txt';
fs.writeFile(outputPath, sortedFoldersString, (err) => {
  if (err) {
    console.error('Error writing to file:', err);
  } else {
    console.log(`Sorted folder information has been written to ${outputPath}`);
  }
});
