const fs = require('fs');
const path = require('path');

function getAllFoldersInFolder(folderPath, folders = []) {
    const contents = fs.readdirSync(folderPath);
  
    contents.forEach(item => {
      const itemPath = path.join(folderPath, item);
      if (fs.statSync(itemPath).isDirectory()) {
        folders.push(itemPath);
        getAllFoldersInFolder(itemPath, folders);
      }
    });
  
    return folders;
}

const folderPath = './Classified_Opcodes';
const allFolders = getAllFoldersInFolder(folderPath);

const totalFiles = new Set()
let k=0;
function readFilesSync(dir) {
    const files = [];

    fs.readdirSync(dir).forEach(filename => {
        const name = path.parse(filename).name;
        const ext = path.parse(filename).ext;
        const filepath = path.resolve(dir, filename);
        const stat = fs.statSync(filepath);
        const isFile = stat.isFile();
        k++;
        totalFiles.add(name)
        if (isFile) files.push({ filepath, name, ext, stat });
    });
    console.log("All files extracted");
    return files;
}

allFolders.forEach(folder => {
    const files = readFilesSync(`${folder}/`)
})
console.log(k + " " + totalFiles.size);